> ## èƒŒæ™¯

â€‹		ç–«æƒ…æœŸé—´ä¸Šæµ·ä¸€èœéš¾æ±‚ï¼Œæ‰‹æœºå±å¹•ç‚¹ç ´äº†ä»ç„¶æ‹¥æŒ¤ä¸­...

â€‹		æ— å¥ˆä¹‹ä¸‹åªèƒ½å†™å…¥æ­¤ç¨‹åºè§£å†³éƒ¨åˆ†é—®é¢˜ï¼Œåˆè¡·ä»…æ—¶å¸®åŠ©å¹¿å¤§ç¾¤ä¼—åŠè‡ªèº«èƒ½å¡«é¥±è‚šå­
<br/>
**<font color="red">å¦‚éç´§æ€¥æƒ…å†µä¸è¦è½»æ˜“ä½¿ç”¨ç»™æ™®é€šäººç•™ç‚¹æœºä¼š</font>**
<br/>
**æ­¤ç¨‹åºå·²å¸®åŠ©èº«è¾¹äººéƒ½åƒåˆ°èœäº†ï¼Œæ„Ÿè°¢å®å’šä¹°èœ**
<br/>

æœ¬ç¨‹åºæœ‰ä»¥ä¸‹äº®ç‚¹

* **å®šæ—¶æŠ¢èœ** (å¯è‡ªå®šä¹‰ cron è§„åˆ™è§¦å‘æŒ‡å®šä»»åŠ¡ï¼‰

* **æå‰é¢„çƒ­**

  ï¼ˆé»˜è®¤çŠ¶æ€ä¸‹åœ¨æŠ¢èœå‰åŠå°æ—¶ä¼šæ¯éš” 20 ç§’è½®è¯¢è´­ç‰©è½¦å†… **å¯ç”¨å•†å“/å¯ç”¨é…é€æ—¶é—´/åœ°å€** è¿›è¡Œç¼“å­˜ï¼Œä»¥é˜²æ­¢é«˜å³°æœŸå‡ºç°è·å–å•†å“æ‹¥å µçŠ¶å†µï¼Œå°½å¯èƒ½ä¿è¯æŠ¢èœç›´æ¥ä¸‹å•å·²å°½å¯èƒ½æœ€å¿«é€Ÿåº¦è¿›è¡ŒæŠ¢èœï¼‰

* **å¤šçº¿ç¨‹å¤šæ—¶é—´æŠ¢èœ**

  ï¼ˆé»˜è®¤çŠ¶å†µä¸‹ï¼Œä¸€æ—¦å•†å“åŠ å…¥è´­ç‰©è½¦å†…ï¼Œåªè¦æœ‰ **å¯ç”¨é…é€æ—¶é—´å°†ä¼šç›¸åŒäº§å“ é€‰æ‹©ä¸åŒé…é€æ—¶é—´åŒæ—¶æäº¤** ï¼Œæ­¤åŠŸèƒ½ä½œç”¨æ˜¾è€Œæ˜“è§ä¸ºäº†æ–¹å¼ç”±äºé«˜å³°æœŸæŠ¢èœå¯¼è‡´ä»¥å¾€å¯ç”¨å®ç°å¤±æ•ˆçŠ¶å†µ æå¤§ç¨‹åº¦ä¸Šæå‡äº†æŠ¢èœçš„æˆåŠŸæ•ˆç‡ï¼‰

* **å¯æ‰©å±•æ€§/ç»´æŠ¤æ€§ é«˜** ï¼ˆå¼€å‘è€…å¯æ ¹æ®è‡ªå·±éœ€æ±‚è¿›è¡Œæ‰©å±•ï¼‰

* **æä¾›æ—¥å¿—è®°å½•/åˆ†å¸ƒå¼ä»»åŠ¡**
  ï¼ˆå¼€å‘è€…éœ€æ ¹æ®è‡ªè¡Œéœ€æ±‚é€‰æ‹©æ€§å¼€å¯æˆ–å…³é—­æ—¥å¿—æœåŠ¡ï¼‰
  æ­¤åŠŸèƒ½ç”±WjjSyncJobæ³¨è§£å®ç° com.wjj.worker.foundation.annotation

* **å®¹é”™ç›¸å¯¹è¾ƒé«˜**ï¼ˆæ ¹æ®è¿”å›ç»“æœå¯¹åº”åˆ é™¤ç¼“å­˜åŠç›¸å¯¹è°ƒæ•´ç­–ç•¥ï¼‰

* **è‡ªå®šä¹‰é€‰æ‹©åœ°å€å…³é”®è¯**

> ##æ“ä½œè¯´æ˜

1. æ·»åŠ éœ€è¦å•†å“åŠ å…¥è´­ç‰©è½¦ï¼Œ**ä¸éœ€è¦çš„å•†å“ä¸€å®šè¦åˆ é™¤**
2. å…¨é€‰è´­ç‰©è½¦å†…å®¹ï¼Œå»ç¡è§‰ï¼ˆä¸éœ€è¦æäº¤ç»“ç®—ï¼‰
3. é™ç­‰ç»“æœğŸ¥°ï¼ŒæŠ¢åˆ°ååŠæ—¶ä»˜æ¬¾ï¼Œå®å’šä¹°èœ5åˆ†é’Ÿå°±è¿‡æœŸäº†è®¢å•

> ## å¿«é€Ÿå¼€å§‹

### åˆ›å»ºä¸»è¡¨
```
create table schedule_job_list
(
    SJL_ID            int auto_increment
        primary key,
    SJL_TASK_NAME     varchar(100)         null comment 'ä»»åŠ¡åç§°',
    SJL_TASK_GROUP    varchar(20)          null comment 'ä»»åŠ¡åˆ†ç»„',
    SJL_CLASS_PATH    varchar(255)         null comment 'æ‰§è¡Œclasså…¨è·¯å¾„',
    SJL_TRIGGER_NAME  varchar(50)          null comment 'è§¦å‘å™¨åç§°',
    SJL_TRIGGER_GROUP varchar(50)          null comment 'è§¦å‘å™¨åˆ†ç»„',
    SJL_ENABLE        tinyint(1) default 1 not null comment 'æ˜¯å¦å¯ç”¨ï¼š0-å¦ 1-æ˜¯',
    SJL_EXPRESS       varchar(255)         null comment 'è¡¨è¾¾å¼',
    SJL_REMARK        varchar(255)         null comment 'å¤‡æ³¨',
    SJL_CREATE_TIME   datetime             null
)
##åˆå§‹åŒ–ä»»åŠ¡

INSERT INTO schedule_job_list ( SJL_TASK_NAME, SJL_TASK_GROUP, SJL_CLASS_PATH, SJL_TRIGGER_NAME, SJL_TRIGGER_GROUP, SJL_ENABLE, SJL_EXPRESS, SJL_REMARK, SJL_CREATE_TIME) VALUES ( '5ç‚¹59åˆ†è‡³6ç‚¹ æ¯éš”ä¸¤ç§’æ‰§è¡Œä¸€æ¬¡ ï¼ˆé¢„çƒ­ï¼‰', 'easyFood', 'com.wjj.worker.foundation.task.MaiCaiJob', 'c9ec9ac4999c46f8b9741f72708b7c6b', 'easyFood', 1, '*/2 59 05 * * ?', null, '2022-04-07 16:50:26');
INSERT INTO schedule_job_list ( SJL_TASK_NAME, SJL_TASK_GROUP, SJL_CLASS_PATH, SJL_TRIGGER_NAME, SJL_TRIGGER_GROUP, SJL_ENABLE, SJL_EXPRESS, SJL_REMARK, SJL_CREATE_TIME) VALUES ( '6ç‚¹è‡³7ç‚¹ æ¯éš”ä¸€ç§’æ‰§è¡Œä¸€æ¬¡', 'easyFood', 'com.wjj.worker.foundation.task.MaiCaiJob', 'a0fdf3f744af41c2b29eba7a3543aac2', 'easyFood', 1, '* 0-59 06 * * ?', null, '2022-04-08 03:25:45');
INSERT INTO schedule_job_list ( SJL_TASK_NAME, SJL_TASK_GROUP, SJL_CLASS_PATH, SJL_TRIGGER_NAME, SJL_TRIGGER_GROUP, SJL_ENABLE, SJL_EXPRESS, SJL_REMARK, SJL_CREATE_TIME) VALUES ( '8ç‚¹åŠè‡³9ç‚¹ æ¯éš”ä¸€ç§’æ‰§è¡Œä¸€æ¬¡', 'easyFood', 'com.wjj.worker.foundation.task.MaiCaiJob', '5a5d254f3a754f6b94ac982c89d5e0af', 'easyFood', 1, '* 30-59 08 * * ?', null, '2022-04-08 03:28:44');
INSERT INTO schedule_job_list ( SJL_TASK_NAME, SJL_TASK_GROUP, SJL_CLASS_PATH, SJL_TRIGGER_NAME, SJL_TRIGGER_GROUP, SJL_ENABLE, SJL_EXPRESS, SJL_REMARK, SJL_CREATE_TIME) VALUES ( '8ç‚¹29è‡³8ç‚¹åŠ æ¯éš”ä¸¤ç§’æ‰§è¡Œä¸€æ¬¡ ï¼ˆé¢„çƒ­ï¼‰', 'easyFood', 'com.wjj.worker.foundation.task.MaiCaiJob', '718366cae3e943e4b2050e96d4dbcab3', 'easyFood', 1, '*/2 29 08 * * ?', null, '2022-04-08 03:29:11');
INSERT INTO schedule_job_list ( SJL_TASK_NAME, SJL_TASK_GROUP, SJL_CLASS_PATH, SJL_TRIGGER_NAME, SJL_TRIGGER_GROUP, SJL_ENABLE, SJL_EXPRESS, SJL_REMARK, SJL_CREATE_TIME) VALUES ( '5ç‚¹27è‡³5ç‚¹59 æ¯éš”äºŒåç§’æ‰§è¡Œä¸€æ¬¡  ï¼ˆé¢„çƒ­ï¼‰', 'easyFood', 'com.wjj.worker.foundation.task.MaiCaiJob', 'c3f76588b99e493fbf0270b0597f0b66', 'easyFood', 1, '0/20 27-59 05 * * ?', null, '2022-04-08 15:32:28');
INSERT INTO schedule_job_list ( SJL_TASK_NAME, SJL_TASK_GROUP, SJL_CLASS_PATH, SJL_TRIGGER_NAME, SJL_TRIGGER_GROUP, SJL_ENABLE, SJL_EXPRESS, SJL_REMARK, SJL_CREATE_TIME) VALUES ( '8ç‚¹è‡³8ç‚¹29 æ¯éš”äºŒåç§’æ‰§è¡Œä¸€æ¬¡ ï¼ˆé¢„çƒ­ï¼‰ ', 'easyFood', 'com.wjj.worker.foundation.task.MaiCaiJob', '540feb861da74581b735b719ef388306', 'easyFood', 1, '0/20 0-29 08 * * ?', null, '2022-04-08 15:34:24');

```
### æ—¥å¿—æœåŠ¡åŠåˆ†å¸ƒå¼ä»»åŠ¡ï¼ˆé€‰æ‹©æ€§åˆ›å»ºï¼‰
**é»˜è®¤çŠ¶æ€ä¸‹æœªå¼€å¯æ—¥å¿—åŠåˆ†å¸ƒå¼ä»»åŠ¡ï¼Œå¦‚éœ€è¯·åœ¨ task jobä¸»å…¥å£ ä¸­å¢åŠ æ³¨è§£ @WjjSyncJob**
```
create table schedule_job_log
(
    SJL_ID             int auto_increment
        primary key,
    SJL_TRIGGER_NAME   varchar(50) null comment 'è§¦å‘å™¨åç§°',
    SJL_TRIGGER_GROUP  varchar(50) null comment 'è§¦å‘å™¨åˆ†ç»„',
    SJL_JOB_NAME       varchar(50) null comment 'jobåç§°',
    SJL_JOB_GROUP      varchar(50) null comment 'jobåˆ†ç»„
',
    SJL_EXECUTE_STATUS tinyint(1)  null comment 'æ‰§è¡Œç»“æœï¼š0-å¤±è´¥ 1-æˆåŠŸ',
    SJL_EXECUTE_RESULT text        null comment 'æ‰§è¡Œç»“æœæ—¥å¿—',
    SJL_EXECUTE_TIME   datetime    null comment 'æ‰§è¡Œæ—¶é—´'
)
```

â€‹		å®‰è£… jdk1.8 && maven è‡ªè¡Œç™¾åº¦é…ç½®ç›¸å¯¹ç®€å•

1. ```
    mvn clean & mvn install
    //stage targetä¸­è·å– w-easy-food-stage.jar å¯åŠ¨
    nohup java -jar w-easy-food-stage.jar
    ```

2. è‡ªè¡Œé€šè¿‡ideaå¯åŠ¨

 ```
    è®¿é—®
    
    http://127.0.0.1:8080/
 ```
![img.png](w-easy-food-stage/src/main/resources/static/images/img2.png)

å¯åŠ¨åé»˜è®¤ è´¦æˆ· easyfood å¯†ç  11270809 å¯è‡ªè¡Œä» application.yml è¿›è¡Œæ›´æ”¹ ï¼ˆspring.security.user èŠ‚ç‚¹ï¼‰
![img.png](w-easy-food-stage/src/main/resources/static/images/img.png)****

### ä¾èµ–ä¸­é—´ä»¶
		1. redisï¼ˆç”¨äºç¼“å­˜ï¼Œé»˜è®¤å¼€å¯å»ºè®®ä½¿ç”¨ï¼Œèƒ½å‡å°‘è®¿é—®é¢‘ç‡å¢åŠ æŠ¢èœæˆåŠŸç‡ æ²¡æœ‰çš„è¯å¯ä»¥ä»é˜¿æŸäº‘å¼„ä¸ªæŒ‰æ—¶çš„ï¼‰
		2. mysqlï¼ˆç”¨äºæ•°æ®å­˜å‚¨ï¼Œæ²¡æœ‰çš„è¯å¯ä»¥å» æŸä¿¡äº‘æ‰˜ç®¡ ç™½å«–ä¸€ä¸ªä¸´æ—¶ä½¿ç”¨ ï¼‰
		3. mavenï¼ˆç”¨äºåŒ…ç®¡ç†ï¼Œæœªå®‰è£…è¯·è‡ªè¡Œåº¦å¨˜å®‰è£…ï¼‰
### é…ç½®è¯´æ˜

åœ¨ application-prod.yml ä¸­ **wjj.worker.easyfood** èŠ‚ç‚¹å¯¹åº”è€…ç¨‹åºè¿è¡Œçš„å…³é”®é…ç½®ç†Ÿæ‚‰

| å±æ€§           | è¯´æ˜                                                                                      |
| -------------- |-----------------------------------------------------------------------------------------|
| notifyUrl      | æŠ¢è´­ç»“æœé€šçŸ¥ï¼Œè‹¹æœæ¨èä½¿ç”¨(Bark) / å®‰å“å¯ä½¿ç”¨serveré…±æˆ–å…¶ä»–æ–¹å¼å¯è‡ªè¡Œé€‰æ‹© <br />  é»˜è®¤å‘é€æ—¶æŒ‰ç…§ https://xxx.xxx/æ ‡é¢˜/å†…å®¹  æ–¹å¼å‘é€ |
| addressKeyWord | ä½ çš„åœ°å€å…³é”®è¯å…³é”®è¯å¯¹åº”å®å’šä¹°èœä¸­çš„ "é—¨ç‰Œå·" æ¨¡ç³Šæœç´¢                                                           |
| userId         | ç”¨æˆ·IDé€šå…³æŠ“åŒ…è·å–ï¼ˆæŠ“åŒ…è¡Œä¸ºä¸å†è¿‡å¤šå™è¿°ï¼Œä¸æ‡‚çš„å¯è‡ªè¡Œç™¾åº¦è·å–å¯¹åº”è½¯ä»¶ç„¶åæ‰“å¼€å®å’šä¹°èœå°ç¨‹åºæŸ¥è¯¢çœ‹å¯¹åº”æ•°æ®ï¼‰å¯¹åº” è¯·æ±‚ä¸­ header â€œddmc-uidâ€ å­—æ®µ      |
| userToken      | ç”¨æˆ·tokené€šè¿‡æŠ“åŒ…è·å– å¯¹åº”è¯·æ±‚cookie DDXQSESSID å­—æ®µï¼Œæ­¤å­—æ®µæœ‰æ•ˆæœŸè¾ƒçŸ­å®æµ‹å¤§æ¦‚åœ¨2å¤©è¿™æ ·ï¼Œè¯·è‡ªè¡ŒcheckåŠæ—¶æ›´æ¢                   |

> ## ç‰ˆæƒè¯´æ˜

**æœ¬é¡¹ç›®ä¸º GPL3.0 åè®®ï¼Œè¯·æ‰€æœ‰è¿›è¡ŒäºŒæ¬¡å¼€å‘çš„å¼€å‘è€…éµå®ˆ GPL3.0åè®®ï¼Œå¹¶ä¸”ä¸å¾—å°†ä»£ç ç”¨äºä¸€åˆ‡å•†ç”¨ã€‚**

**åˆ›ä½œä¸æ˜“ï¼Œå¦‚å¸®åŠ©åˆ°ä½ äº†ï¼Œè¯·ç‚¹ä¸ª star æˆ– èµåŠ©å¼€å‘è€…  æ‰‹åŠ¨ç‹—å¤´**

> ## å…è´£å£°æ˜
**æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ äº¤æµå‚è€ƒï¼Œä¸€åˆ‡ç”±äºå…¶ä»–å¼€å‘è€…æœ¬èº«è¿æ³•è¡Œä¸ºåŠå•†ä¸šä¾µæƒè¡Œä¸ºä¸æœ¬äººæ— å…³**

**å¦‚ä¾µæƒ/åŠå…¶ä»–è¡Œä¸º è¯·åŠ v BeerGod1127 è”ç³» å¤‡æ³¨æ¥æ„**
